<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>ðŸ’° Expense Tracker</h1>

    <!-- Login Card -->
    <div class="card">
        <button class="btn google-btn" onclick="login()">
            <img src="https://cdn-icons-png.flaticon.com/512/281/281764.png" width="18">
            Sign in with Google
        </button>
    </div>

    <!-- Form Card -->
    <div class="card" style="margin-top:20px;">
        <div class="form-group">
            <label>Amount</label>
            <input type="number" id="amount" placeholder="Enter amount">
        </div>

        <div class="form-group">
            <label>Category</label>
            <input type="text" id="category" placeholder="Enter category">
        </div>

        <button class="btn" onclick="addTransaction('income')">Add Income</button>
        <button class="btn" onclick="addTransaction('expense')" style="margin-left:10px;">Add Expense</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
  };

  firebase.initializeApp(firebaseConfig);
  const authInstance = firebase.auth();

  function login() {
    const provider = new firebase.auth.GoogleAuthProvider();
    authInstance.signInWithPopup(provider);
  }

  async function addTransaction(type) {
    const user = authInstance.currentUser;
    if (!user) {
      alert("Please login first");
      return;
    }

    const token = await user.getIdToken();

    const amount = document.getElementById("amount").value;
    const category = document.getElementById("category").value;

    await fetch("/add", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        token: token,
        type: type,
        amount: parseFloat(amount),
        category: category
      })
    });

    alert("Transaction Added!");
  }
</script>

</body>
</html>
